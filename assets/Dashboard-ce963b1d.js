import{r as v,k as Y,s as S,n as W,R as H,j as d,a as O,u as F,e as U,g as I,b as J,$ as K,c as X,d as ee,f as te,S as re,h as oe,i as se,l as ne,G as ie,m as ae,t as N,o as de,p as le,q as ce,v as ue,w as D}from"./index-8126dfef.js";import{t as fe,d as L,a as be}from"./db-57eeb6a0.js";const z=(e,o)=>{if(!e)return 0;const s=e.includes("px")?+e.split("px")[0]:e.includes("%")?+e.split("%")[0]*o*.01:e;return Number.isNaN(+s)?0:+s},he=e=>{if(!e||typeof window>"u")return{width:0,height:0};const o=e.getBoundingClientRect(),{width:s,height:t}=window.getComputedStyle(e);return{width:z(`${s}`,o.width),height:z(`${t}`,o.height)}},me=e=>{const[o,s]=v.useState({width:0,height:0}),t=()=>{const{width:n,height:h}=he(e.current);s({width:n,height:h})};return v.useEffect(()=>t(),[e.current]),[o,t]},pe=Y({"0%":{backgroundPosition:"200% 0"},to:{backgroundPosition:"-200% 0"}}),ge=S("div",{opacity:0,margin:"0 auto",position:"relative",overflow:"hidden",maxWidth:"100%",transition:"transform 250ms ease 0ms, opacity 200ms ease-in 0ms","@motion":{transition:"none"},variants:{ready:{true:{opacity:1},false:{opacity:0}}}}),$e=S("img",{size:"100%",display:"block"}),xe=S("div",{position:"absolute",top:0,left:0,right:0,bottom:0,size:"100%",borderRadius:"inherit",backgroundImage:"linear-gradient(270deg, $colors$accents1, $colors$accents2, $colors$accents2, $colors$accents1)",backgroundSize:"400% 100%",animation:`${pe} 5s ease-in-out infinite`,transition:"opacity 300ms ease-out"}),Z=H.memo(({opacity:e,css:o,className:s,...t})=>d.jsx(xe,{className:O("nextui-image-skeleton",s),css:{opacity:e,...o},...t}));Z.toString=()=>".nextui-image-skeleton";const we=W(Z,{opacity:.5,className:""}),q=H.forwardRef((e,o)=>{const{src:s,width:t,height:n,showSkeleton:h=!0,className:p,maxDelay:f=3e3,autoResize:g=!1,objectFit:$="scale-down",containerCss:r,css:u,...l}=e,a=F(o),[x,c]=v.useState(!0),[y,C]=v.useState(h),{w:P,h:i}=v.useMemo(()=>({w:t?typeof t=="number"?`${t}px`:t:"auto",h:n?typeof n=="number"?`${n}px`:n:"auto"}),[t,n]),[w,b,R]=fe(i),[k,m]=me(a),A=h&&!!t&&!!n;v.useEffect(()=>{a.current&&a.current.complete&&(c(!1),C(!1))}),v.useEffect(()=>{const V=setTimeout(()=>{A&&C(!1),clearTimeout(V)},f);return()=>clearTimeout(V)},[x]),v.useEffect(()=>{if(!g)return;const V=k.width===0,_=R.current==="auto";!V&&t&&n&&(k.width<t?!_&&b("auto"):_&&b(i))},[k,t]),U(()=>{g&&m()});const T=v.useMemo(()=>x?"loading":"ready",[x]);return d.jsxs(ge,{className:O("nextui-image-container",`nextui-image--${T}`,p),css:{width:P,height:w,...r},"data-state":T,ready:!x||y,children:[y&&d.jsx(we,{opacity:1}),d.jsx($e,{ref:a,alt:e.alt||"",className:"nextui-image",css:{objectFit:$,...u},"data-state":T,height:n,src:s,width:t,onLoad:()=>{c(!1)},...l})]})});q.toString=()=>".nextui-image";const ve=H.memo(q),ye=S("div",{width:"100%",maxWidth:"100%",position:"relative",variants:{color:{default:{bg:"$border"},primary:{bg:"$primary"},secondary:{bg:"$secondary"},success:{bg:"$success"},warning:{bg:"$warning"},error:{bg:"$error"}}},defaultVariants:{color:"default"}}),Se=S("span",{position:"absolute",left:"50%",top:"50%",minHeight:"100%",display:"inline-flex",jc:"center",ai:"center",transform:"translate(-50%, -50%)",padding:"0 $lg",fontSize:"$base",fontWeight:"bold",textTransform:"capitalize",backgroundColor:"$background",zIndex:"$1",variants:{color:{default:{color:"$text"},primary:{color:"$primary"},secondary:{color:"$secondary"},success:{color:"$success"},warning:{color:"$warning"},error:{color:"$error"}}}}),G=({height:e,x:o,y:s,align:t,children:n,textColor:h,css:p,...f})=>{const g=v.useMemo(()=>{if(t&&t!=="center")return t==="left"||t==="start"?{transform:"translateY(-50%)",left:"7%"}:{transform:"translateY(-50%)",left:"auto",right:"7%"}},[t]),$=s?I(s/2):0,r=o?I(o/2):0;return d.jsx(ye,{css:{margin:`${$} ${r}`,height:`calc(${e} * 1px)`,...p},role:"separator",...f,children:n&&d.jsx(Se,{className:"nextui-divider-text",color:h,css:{...g},children:n})})};G.toString=()=>".nextui-divider";const Ce=H.memo(G),Pe=W(Ce,{x:0,y:0,height:1,align:"center"}),je=e=>{const{ref:o,disableAnimation:s=!1,disableRipple:t=!1,variant:n="shadow",isHoverable:h=!1,borderWeight:p="light",isPressable:f=!1,onClick:g,onPress:$,autoFocus:r,allowTextSelectionOnPress:u=!0,...l}=e,a=F(o),{onClick:x,...c}=J(!1,a),y=m=>{s||t||!a.current||x(m)},{isPressed:C,pressProps:P}=K({isDisabled:!f,onPress:m=>{m.pointerType!=="keyboard"&&m.pointerType!=="virtual"||(y(m),g==null||g(m)),$==null||$(m)},allowTextSelectionOnPress:u,...l}),{hoverProps:i,isHovered:w}=X({isDisabled:!h,...l}),{isFocusVisible:b,focusProps:R}=ee({autoFocus:r});P.onClick=m=>{f&&(y(m),g==null||g(m))};const k=v.useCallback((m={})=>({...te(f?{...P,...R}:{},h?i:{},l,m)}),[f,h,P,R,i,l]);return{cardRef:a,variant:n,borderWeight:p,isPressable:f,isHovered:w,isPressed:C,disableAnimation:s,disableRipple:t,dripBindings:c,onDripClickHandler:x,isFocusVisible:b,getCardProps:k}},ke=S("div",{d:"flex",w:"100%",h:"auto",flex:"1 1 auto",fd:"column",jc:"inherit",ai:"inherit",ac:"inherit",py:"$lg",px:"$sm",oy:"auto",position:"relative",ta:"left"}),He=S("div",{$$cardColor:"$colors$backgroundContrast",$$cardTextColor:"$colors$text",m:0,p:0,br:"$lg",bg:"$$cardColor",color:"$$cardTextColor",position:"relative",display:"flex",overflow:"hidden",fd:"column",width:"100%",height:"auto",boxSizing:"border-box","@motion":{transition:"none"},".nextui-image":{width:"100%"},[`& ${re}`]:{zIndex:"$1",".nextui-drip-filler":{opacity:.25,fill:"$accents6"}},variants:{variant:{flat:{bg:"$accents0"},shadow:{dropShadow:"$lg","@safari":{boxShadow:"$lg",dropShadow:"none"},"@-moz-document url-prefix()":{boxShadow:"$lg",dropShadow:"none"}},bordered:{borderStyle:"solid",borderColor:"$border"}},borderWeight:{light:{bw:"$light"},normal:{bw:"$normal"},bold:{bw:"$bold"},extrabold:{bw:"$extrabold"},black:{bw:"$black"}},disableAnimation:{true:{transition:"none"},false:{transition:"$card"}},isPressable:{true:{cursor:"pointer",us:"none",WebkitTapHighlightColor:"transparent"}},isPressed:{true:{}},isHovered:{true:{dropShadow:"$lg","@safari":{boxShadow:"$lg",dropShadow:"none"},"@-moz-document url-prefix()":{boxShadow:"$lg",dropShadow:"none"}}}},compoundVariants:[{isPressed:!0,disableAnimation:!1,css:{transform:"scale(0.97)"}},{isHovered:!0,disableAnimation:!1,css:{transform:"translateY(-2px)"}},{isHovered:!0,variant:"shadow",css:{dropShadow:"$xl","@safari":{boxShadow:"$xl",dropShadow:"none"},"@-moz-document url-prefix()":{boxShadow:"$xl",dropShadow:"none"}}}]},oe,se),Re=S("div",{w:"100%",display:"flex",flexShrink:0,zIndex:"$1",jc:"flex-start",ai:"center",overflow:"hidden",color:"inherit",p:"$sm"}),Ve=S("div",{w:"100%",h:"auto",p:"$sm",d:"flex",ai:"center",overflow:"hidden",color:"inherit",bblr:"$lg",bbrr:"$lg",variants:{isBlurred:{true:{bf:"saturate(180%) blur(10px)",bg:"$$cardColor"}}}}),Q=H.forwardRef(({...e},o)=>{const{as:s,css:t,children:n,...h}=e,{cardRef:p,variant:f,isFocusVisible:g,isPressable:$,isPressed:r,disableAnimation:u,disableRipple:l,borderWeight:a,isHovered:x,getCardProps:c,dripBindings:y}=je({...h,ref:o});return d.jsxs(He,{ref:p,as:s,borderWeight:a,css:t,disableAnimation:u,isFocusVisible:g,isHovered:x,isPressable:$,isPressed:r,role:$?"button":"region",tabIndex:$?0:-1,variant:f,...c(),children:[$&&!u&&!l&&d.jsx(ne,{...y}),n]})});Q.toString=()=>".nextui-card";const j=Q;j.Header=Re,j.Body=ke,j.Footer=Ve,j.Image=ve,j.Divider=Pe;function Te(e){return ie({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"}}]})(e)}const De="_hover_button_1uhsn_1",Ee="_hidden_button_1uhsn_13",M={hover_button:De,hidden_button:Ee};function B(e){var n;const o=ae();function s(){e.metadata?o(`compare/${e.metadata.id}`):o("compare/new")}function t(){e.metadata&&L.comparisons.delete(e.metadata.id).then(console.log).catch(console.error)}return d.jsx(N,{children:d.jsx(j,{className:M.hidden_button,onClick:s,isPressable:!0,css:{w:"inherit",h:"inherit",$$cardColor:e.metadata?"$colors$primary":"$colors$secondary",position:"relative"},children:d.jsx(j.Body,{children:d.jsxs(N,{css:{display:"flex",w:"$50",h:"$50",maxH:"$100",maxW:"$100",wordWrap:"break-word"},children:[d.jsx(de,{color:"white",h4:!0,children:((n=e.metadata)==null?void 0:n.title)||"New Comparison"}),e.metadata&&d.jsx(le,{onClick:t,bordered:!1,className:M.hover_button,size:"md",icon:d.jsx(Te,{size:22,fill:"#73110f"})})]})})})})}var E={exports:{}};const _e=ce(be);(function(e,o){(function(s,t){t(o,_e,v)})(ue,function(s,t,n){function h(r){return r&&typeof r=="object"&&"default"in r?r:{default:r}}var p=h(n);function f(r,u,l){var a,x;typeof r=="function"?(a=u||[],x=l):(a=[],x=u);var c=p.default.useRef({hasResult:!1,result:x,error:null}),y=p.default.useReducer(function(i){return i+1},0);y[0];var C=y[1],P=p.default.useMemo(function(){var i=typeof r=="function"?r():r;if(!i||typeof i.subscribe!="function")throw r===i?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!c.current.hasResult&&typeof window<"u"&&(typeof i.hasValue!="function"||i.hasValue()))if(typeof i.getValue=="function")c.current.result=i.getValue(),c.current.hasResult=!0;else{var w=i.subscribe(function(b){c.current.result=b,c.current.hasResult=!0});typeof w=="function"?w():w.unsubscribe()}return i},a);if(p.default.useDebugValue(c.current.result),p.default.useEffect(function(){var i=P.subscribe(function(w){var b=c.current;(b.error!==null||b.result!==w)&&(b.error=null,b.result=w,b.hasResult=!0,C())},function(w){var b=c.current;b.error!==w&&(b.error=w,C())});return typeof i=="function"?i:i.unsubscribe.bind(i)},a),c.current.error)throw c.current.error;return c.current.result}function g(r,u,l){return f(function(){return t.liveQuery(r)},u||[],l)}function $(r,u,l){if(!r)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var a;if(arguments.length>=3){if(!("transaction"in r))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if(typeof u!="string")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!l||typeof l!="object")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");a=r}else{if(r instanceof t.Dexie)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if(typeof r.table=="function"&&typeof r.db=="object")a=r.db,l=r,u=r.table();else throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in a))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in a.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return f(function(){return a.cloud.permissions(l,u)},[l.realmId,l.owner,u])}s.useLiveQuery=g,s.useObservable=f,s.usePermissions=$,Object.defineProperty(s,"__esModule",{value:!0})})})(E,E.exports);var Ie=E.exports;function Me(){const e=Ie.useLiveQuery(()=>L.comparisons.toArray());return console.log(e),d.jsxs(D.Container,{gap:1,children:[d.jsx(D,{children:d.jsx(B,{})}),e==null?void 0:e.map(o=>d.jsx(D,{children:d.jsx(B,{metadata:{id:o.id,title:o.data.title}})},o.id||v.useId()))]})}export{Me as default};
